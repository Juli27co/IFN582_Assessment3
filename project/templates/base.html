<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FotoBooking - {{title}}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="{{ url_for('static', filename='css/styles.css') }}"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <h1 style="padding: 20px; " class="main-header mb-0">FotoBooking</h1>

      <nav class="navbar navbar-expand-lg main-theme-bg"
        data-bs-theme="dark"
      >
        <div class="container-fluid">
          <a class="navbar-brand text-white" href="{{url_for('main.index')}}"
            >FotoBooking</a
          >
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              {% for service in global_services %}
              <li class="nav-item">
                <a
                  class="nav-link text-light"
                  href="/?service_type={{ service.id }}"
                >
                  {{ service.name }}
                </a>
              </li>
              {% endfor %} {% if session.get('userType') == "client" or session.get('userType') == None %}
              <li class="nav-item">
                <a href="{{ url_for('main.orderCheckout') }}">
                  <button
                    type="button"
                    class="btn position-relative mt-1"
                  >
                    <i class="fa fa-shopping-cart" style="font-size: 24px"></i>
                    <span
                      class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger mt-2"
                    >
                      {{ session.get('cart', {}).get('items', [])|length }}
                      <span class="visually-hidden">unread messages</span>
                    </span>
                  </button>
                </a>
              </li>
              {% endif %}
            </ul>
            <form
              class="d-flex"
              method="GET"
              action="{{ url_for('main.index') }}"
            >
              <input
                class="form-control me-2"
                type="search"
                name="search"
                placeholder="Search photographers..."
                aria-label="Search"
                style="background-color:#1b4965; color:white; border:none; ::placeholder{color:#e0e0e0;}"
              />
              <button class="btn btn-light" type="submit">Search</button>
            </form>
            <div
              class="d-flex ms-2 justify-content-end align-items-center mt-1"
            >
              {% if session.get('logged_in') %}
              <span class="navbar-text text-light me-2"
                >Welcome, {{ session.get('user').firstName }}!</span
              >
              {% if session.get('userType') == 'photographer' or
              session.get('userType') == 'admin' %}
              <ul class="navbar-nav">
                <li class="nav-item dropdown">
                  <button
                    class="btn dropdown-toggle btn-outline-light me-2"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-gear" style="font-size: 24px"></i> Setting
                  </button>
                  <ul class="dropdown-menu">
                    {% if session.get('userType') == 'photographer' %}
                    <li>
                      <a
                        class="dropdown-item"
                        href="{{url_for('main.vendor_management_check' )}}"
                        >Manage Portfolio</a
                      >
                    </li>
                    {% endif %} {% if session.get('userType') == 'admin' %}
                    <li>
                      <a
                        class="dropdown-item"
                        href="{{url_for('main.admin_management')}}"
                        >Admin Panel</a
                      >
                    </li>
                    {% endif %}
                  </ul>
                </li>
              </ul>
              {% endif %}
              <a
                href="{{ url_for('main.logout') }}"
                class="btn btn-outline-light"
                >Logout</a
              >
              {% else %}
              <a
                href="{{ url_for('main.login') }}"
                class="btn btn-outline-light me-2"
                >Login</a
              >
              <a href="{{ url_for('main.register') }}" class="btn btn-light"
                >Register</a
              >
              {% endif %}
            </div>
          </div>
        </div>
      </nav>
      <!--For flash message -->  
      {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
              {% for category, message in messages %}
                  {% if category == "message" %}
                    <div class="alert alert-primary alert-dismissible fade show message-con" role="alert">
                  {% elif category == "error" %}
                    <div class="alert alert-danger alert-dismissible fade show message-con" role="alert">
                  {% else %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show message-con" role="alert">
                  {% endif %}
                      <p>{{ message }}</p>
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
              {% endfor %}
          {% endif %}
      {% endwith %}

      {% block head %} 
      {% endblock %}
    </header>

    <main>{% block main %} {% endblock %}</main>

    <footer>
      <div class="main-theme-bg text-white mt-5" 
        data-bs-theme="dark" 
        pb-3>
        <div class="m-0 p-4 text-center company_info">
            <h5>FotoBooking</h5>
            <p>2 George St, Brisbane City QLD 4000</p>
            <p>TEL: 3138 0000</p>
            <p>Mail: sample@mail.com</p>
            <p>OPEN: Mon-Sun 10am-6pm</p>
        </div>
        <p class="text-center">
          <i class="fa fa-copyright">IFN582_Group4</i>    
        </p>
      </div>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
  </body>
</html>